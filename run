#!/bin/bash
# AI CodeForge - Main Run Script Wrapper
# Automatically uses virtual environment if available

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
VENV_DIR="$SCRIPT_DIR/venv"

# Debug: Show what we're checking
if [ ! -z "$DEBUG" ]; then
    echo "üîç Checking for venv at: $VENV_DIR"
fi

# Use venv Python if available, otherwise use system Python
if [ -d "$VENV_DIR" ]; then
    PYTHON="$VENV_DIR/bin/python3"
    if [ ! -z "$DEBUG" ]; then
        echo "‚úÖ Using venv Python"
    fi
else
    PYTHON="python3"
    if [ ! -z "$DEBUG" ]; then
        echo "‚ö†Ô∏è  venv not found, using system Python"
    fi
fi

# Show startup message
echo "ü§ñ Starting up..."
if [ -d "$VENV_DIR" ]; then
    echo "‚úÖ Using virtual environment"
fi

# Run the actual Python script
echo "üöÄ Launching AI CodeForge..."
exec "$PYTHON" "$SCRIPT_DIR/run.py" "$@"
